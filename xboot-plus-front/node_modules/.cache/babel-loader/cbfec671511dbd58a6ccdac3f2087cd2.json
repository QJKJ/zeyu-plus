{"remainingRequest":"Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\src\\views\\own-space\\own-space.vue?vue&type=script&lang=js&","dependencies":[{"path":"Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\src\\views\\own-space\\own-space.vue","mtime":1545792990767},{"path":"Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545803981415},{"path":"Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"Z:\\zeyu\\zeyu-plus\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { userInfo, userInfoEdit, relatedInfo, unRelate, githubLogin, qqLogin, weiboLogin, sendCodeEmail, editEmail, sendSms, changeMobile, unlock, uploadFile, getDictDataByType } from \"@/api/index\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"ownspace_index\",\n  data: function data() {\n    var validePhone = function validePhone(rule, value, callback) {\n      var re = /^1[0-9]{10}$/;\n\n      if (!re.test(value)) {\n        callback(new Error(\"请输入正确格式的手机号\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      accessToken: {},\n      uploadFileUrl: uploadFile,\n      area: 86,\n      messageOpen: 1,\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      mobileEditForm: {\n        mobile: \"\",\n        code: \"\"\n      },\n      emailEditForm: {\n        email: \"\",\n        code: \"\"\n      },\n      defaultList: [{\n        url: \"\"\n      }],\n      uploadList: [],\n      viewImage: false,\n      imgUrl: \"\",\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      saveLoading: false,\n      sended: false,\n      count: 60,\n      countButton: \"60 s\",\n      sendedEmail: false,\n      countEmail: 60,\n      countButtonEmail: \"60 s\",\n      savePassLoading: false,\n      canGetIdentifyCode: false,\n      // 是否可点获取验证码\n      checkCodeLoading: false,\n      checkPassLoading: false,\n      sendingSms: false,\n      editEmailLoading: false,\n      mobileEditValidate: {\n        mobile: [{\n          required: true,\n          message: \"请输入手机号码\"\n        }, {\n          validator: validePhone\n        }]\n      },\n      emailEditValidate: {\n        email: [{\n          required: true,\n          message: \"请输入邮箱地址\"\n        }, {\n          type: \"email\",\n          message: \"邮箱格式不正确\"\n        }]\n      },\n      editMobileVisible: false,\n      // 显示填写验证码box\n      editEmailVisible: false,\n      sendEmailLoading: false,\n      canSendEditEmail: true,\n      passCheckVisible: false,\n      // 密码验证\n      password: \"\",\n      changeType: \"\",\n      github: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      qq: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      weibo: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      jumping: false,\n      currMenu: \"基本信息\",\n      dictSex: []\n    };\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.getDictSexData();\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n      var v = JSON.parse(Cookies.get(\"userInfo\")); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] === null) {\n          v[attr] = \"\";\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var userInfo = JSON.parse(str);\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.initPhone = userInfo.mobile;\n      this.mobileEditForm.mobile = userInfo.mobile;\n      this.initEmail = userInfo.email;\n      this.emailEditForm.email = userInfo.email;\n      this.defaultList[0].url = userInfo.avatar;\n\n      if (userInfo.address !== null && userInfo.address !== \"\") {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n\n      if (this.userForm.type === 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type === 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n\n      relatedInfo(userInfo.username).then(function (res) {\n        if (res.success) {\n          var r = res.result;\n          _this.github.related = r.github;\n          _this.github.id = r.githubId;\n          _this.github.username = r.githubUsername;\n          _this.qq.related = r.qq;\n          _this.qq.id = r.qqId;\n          _this.qq.username = r.qqUsername;\n          _this.weibo.related = r.weibo;\n          _this.weibo.id = r.weiboId;\n          _this.weibo.username = r.weiboUsername;\n        } else {\n          _this.$Message.error(\"加载绑定第三方账号信息失败\");\n        }\n      });\n    },\n    getDictSexData: function getDictSexData() {\n      var _this2 = this;\n\n      // 获取性别字典数据\n      getDictDataByType(\"sex\").then(function (res) {\n        if (res.success) {\n          _this2.dictSex = res.result;\n        }\n      });\n    },\n    changePass: function changePass() {\n      this.$router.push({\n        name: \"change_pass\"\n      });\n    },\n    changeMenu: function changeMenu(v) {\n      this.currMenu = v;\n    },\n    toRelateGithub: function toRelateGithub() {\n      var _this3 = this;\n\n      this.jumping = true;\n      githubLogin().then(function (res) {\n        if (res.success) {\n          window.location.href = res.result;\n        } else {\n          _this3.jumping = false;\n        }\n      });\n    },\n    toRelateQQ: function toRelateQQ() {\n      var _this4 = this;\n\n      this.jumping = true;\n      qqLogin().then(function (res) {\n        if (res.success) {\n          window.location.href = res.result;\n        } else {\n          _this4.jumping = false;\n        }\n      });\n    },\n    toRelateWeibo: function toRelateWeibo() {\n      var _this5 = this;\n\n      this.jumping = true;\n      weiboLogin().then(function (res) {\n        if (res.success) {\n          window.location.href = res.result;\n        } else {\n          _this5.jumping = false;\n        }\n      });\n    },\n    unRelateGithub: function unRelateGithub() {\n      var _this6 = this;\n\n      this.$Modal.confirm({\n        title: \"确认解绑Github账号\",\n        content: \"您确认要解除绑定 \" + this.github.username + \" ?\",\n        onOk: function onOk() {\n          var params = {\n            socialType: 0,\n            ids: [_this6.github.id],\n            usernames: _this6.userForm.username\n          };\n          unRelate(params).then(function (res) {\n            if (res.success === true) {\n              _this6.$Message.success(\"操作成功\");\n\n              _this6.github.related = false;\n            }\n          });\n        }\n      });\n    },\n    unRelateQQ: function unRelateQQ() {\n      var _this7 = this;\n\n      this.$Modal.confirm({\n        title: \"确认解绑QQ账号\",\n        content: \"您确认要解除绑定 \" + this.qq.username + \" ?\",\n        onOk: function onOk() {\n          var params = {\n            socialType: 1,\n            ids: [_this7.qq.id],\n            usernames: _this7.userForm.username\n          };\n          unRelate(params).then(function (res) {\n            if (res.success === true) {\n              _this7.$Message.success(\"操作成功\");\n\n              _this7.qq.related = false;\n            }\n          });\n        }\n      });\n    },\n    unRelateWeibo: function unRelateWeibo() {\n      var _this8 = this;\n\n      this.$Modal.confirm({\n        title: \"确认解绑微博账号\",\n        content: \"您确认要解除绑定 \" + this.weibo.username + \" ?\",\n        onOk: function onOk() {\n          var params = {\n            socialType: 2,\n            ids: [_this8.weibo.id],\n            usernames: _this8.userForm.username\n          };\n          unRelate(params).then(function (res) {\n            if (res.success === true) {\n              _this8.$Message.success(\"操作成功\");\n\n              _this8.weibo.related = false;\n            }\n          });\n        }\n      });\n    },\n    handleView: function handleView(imgUrl) {\n      this.imgUrl = imgUrl;\n      this.viewImage = true;\n    },\n    handleRemove: function handleRemove(file) {\n      var fileList = this.$refs.upload.fileList;\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n    },\n    handleSuccess: function handleSuccess(res, file) {\n      if (res.success === true) {\n        file.url = res.result;\n        this.userForm.avatar = res.result;\n        this.defaultList[0].url = res.result;\n        this.$refs.upload.fileList.splice(0, 1);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError: function handleError(error, file, fileList) {\n      this.$Message.error(error.toString());\n    },\n    handleFormatError: function handleFormatError(file) {\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc: \"所选文件‘ \" + file.name + \" ’格式不正确, 请选择 .jpg .jpeg .png .gif格式文件\"\n      });\n    },\n    handleMaxSize: function handleMaxSize(file) {\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    handleBeforeUpload: function handleBeforeUpload() {\n      var check = this.uploadList.length < 2;\n\n      if (!check) {\n        this.$Notice.warning({\n          title: \"最多只能上传 1 张图片\"\n        });\n      }\n\n      return check;\n    },\n    showChangeMobile: function showChangeMobile() {\n      this.passCheckVisible = true;\n      this.password = \"\";\n      this.changeType = \"mobile\";\n    },\n    showChangeEmail: function showChangeEmail() {\n      this.passCheckVisible = true;\n      this.password = \"\";\n      this.changeType = \"email\";\n    },\n    checkPassChange: function checkPassChange() {\n      var _this9 = this;\n\n      this.checkPassLoading = true;\n      unlock({\n        password: this.password\n      }).then(function (res) {\n        _this9.checkPassLoading = false;\n\n        if (res.success === true) {\n          _this9.passCheckVisible = false;\n\n          if (_this9.changeType == \"mobile\") {\n            _this9.editMobileVisible = true;\n          } else if (_this9.changeType == \"email\") {\n            _this9.editEmailVisible = true;\n          }\n        }\n      });\n    },\n    saveEdit: function saveEdit() {\n      var _this10 = this;\n\n      this.saveLoading = true;\n      var params = this.userForm;\n      userInfoEdit(params).then(function (res) {\n        _this10.saveLoading = false;\n\n        if (res.success === true) {\n          _this10.$Message.success(\"保存成功\"); // 更新用户信息\n\n\n          Cookies.set(\"userInfo\", _this10.userForm); // 更新头像\n\n          _this10.$store.commit(\"setAvatarPath\", _this10.userForm.avatar);\n        }\n      });\n    },\n    changeAddress: function changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    },\n    cancelInputCodeBox: function cancelInputCodeBox() {\n      this.editMobileVisible = false;\n      this.userForm.mobile = this.initPhone;\n    },\n    cancelEditEmail: function cancelEditEmail() {\n      this.editEmailVisible = false;\n      this.emailEditForm.email = this.initEmail;\n    },\n    countDown: function countDown() {\n      var that = this;\n\n      if (this.count === 0) {\n        this.sended = false;\n        this.count = 60;\n        return;\n      } else {\n        this.countButton = this.count + \" s\";\n        this.count--;\n      }\n\n      setTimeout(function () {\n        that.countDown();\n      }, 1000);\n    },\n    countDownEmail: function countDownEmail() {\n      var that = this;\n\n      if (this.countEmail === 0) {\n        this.sendedEmail = false;\n        this.countEmail = 60;\n        return;\n      } else {\n        this.countButtonEmail = this.countEmail + \" s\";\n        this.countEmail--;\n      }\n\n      setTimeout(function () {\n        that.countDownEmail();\n      }, 1000);\n    },\n    getIdentifyCode: function getIdentifyCode() {\n      var _this11 = this;\n\n      this.$refs[\"mobileEditForm\"].validate(function (valid) {\n        if (valid) {\n          _this11.sendingSms = true;\n          sendSms(_this11.mobileEditForm.mobile).then(function (res) {\n            _this11.sendingSms = false;\n\n            if (res.success) {\n              _this11.$Message.success(\"发送短信验证码成功\"); // 开始倒计时\n\n\n              _this11.sended = true;\n\n              _this11.countDown();\n            }\n          });\n        }\n      });\n    },\n    submitEditMobile: function submitEditMobile() {\n      var _this12 = this;\n\n      this.$refs[\"mobileEditForm\"].validate(function (valid) {\n        if (valid) {\n          if (!_this12.mobileEditForm.code) {\n            _this12.codeError = \"请填写短信验证码\";\n            return;\n          } else {\n            _this12.codeError = \"\";\n          }\n\n          _this12.checkCodeLoading = true;\n          changeMobile(_this12.mobileEditForm).then(function (res) {\n            _this12.checkCodeLoading = false;\n\n            if (res.success) {\n              _this12.$Message.success(\"修改成功\");\n\n              _this12.userForm.mobile = _this12.mobileEditForm.mobile;\n              _this12.initPhone = _this12.mobileEditForm.mobile;\n\n              _this12.updateUserInfo();\n\n              _this12.editMobileVisible = false;\n            }\n          });\n        }\n      });\n    },\n    hasChangePhone: function hasChangePhone() {\n      var _this13 = this;\n\n      if (this.mobileEditForm.mobile === this.initPhone) {\n        this.canGetIdentifyCode = true;\n      } else {\n        this.$refs[\"mobileEditForm\"].validate(function (valid) {\n          if (valid) {\n            _this13.canGetIdentifyCode = false;\n          } else {\n            _this13.canGetIdentifyCode = true;\n          }\n        });\n      }\n    },\n    hasChangeEmail: function hasChangeEmail() {\n      if (this.emailEditForm.email === this.initEmail) {\n        this.canSendEditEmail = true;\n      } else {\n        this.canSendEditEmail = false;\n      }\n    },\n    sendVerifyEmail: function sendVerifyEmail() {\n      var _this14 = this;\n\n      this.$refs[\"emailEditForm\"].validate(function (valid) {\n        if (valid) {\n          _this14.sendEmailLoading = true;\n          sendCodeEmail(_this14.emailEditForm.email).then(function (res) {\n            _this14.sendEmailLoading = false;\n\n            if (res.success) {\n              _this14.$Message.success(\"发送邮件验证码成功，请注意查收\"); // 开始倒计时\n\n\n              _this14.sendedEmail = true;\n\n              _this14.countDownEmail();\n            }\n          });\n        }\n      });\n    },\n    submitEditEmail: function submitEditEmail() {\n      var _this15 = this;\n\n      this.$refs[\"emailEditForm\"].validate(function (valid) {\n        if (valid) {\n          if (!_this15.emailEditForm.code) {\n            _this15.codeError = \"验证码不能为空\";\n            return;\n          } else {\n            _this15.codeError = \"\";\n          }\n\n          _this15.editEmailLoading = true;\n          editEmail(_this15.emailEditForm).then(function (res) {\n            _this15.editEmailLoading = false;\n\n            if (res.success) {\n              _this15.initEmail = _this15.emailEditForm.email;\n              _this15.userForm.email = _this15.emailEditForm.email;\n\n              _this15.updateUserInfo();\n\n              _this15.$Message.success(\"修改邮件成功\");\n\n              _this15.editEmailVisible = false;\n            }\n          });\n        }\n      });\n    },\n    updateUserInfo: function updateUserInfo() {\n      var _this16 = this;\n\n      // 更新用户信息\n      userInfo().then(function (res) {\n        if (res.success) {\n          // 避免超过大小限制\n          delete res.result.permissions;\n\n          if (_this16.getStore(\"saveLogin\")) {\n            // 保存7天\n            Cookies.set(\"userInfo\", JSON.stringify(res.result), {\n              expires: 7\n            });\n          } else {\n            Cookies.set(\"userInfo\", JSON.stringify(res.result));\n          }\n\n          _this16.setStore(\"userInfo\", res.result);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.uploadList = this.$refs.upload.fileList;\n    this.init();\n    this.hasChangePhone();\n  }\n};",{"version":3,"sources":["own-space.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\">\r\n@import \"./own-space.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"own-space\">\r\n    <Card class=\"own-space-new\" >\r\n      <div class=\"own-wrap\">\r\n        <div style=\"width:240px\">\r\n          <Menu active-name=\"基本信息\" theme=\"light\"  @on-select=\"changeMenu\">\r\n            <MenuItem name=\"基本信息\">基本信息</MenuItem>\r\n            <MenuItem name=\"安全设置\">安全设置</MenuItem>\r\n            <MenuItem name=\"第三方账号绑定\">第三方账号绑定</MenuItem>\r\n            <MenuItem name=\"消息通知\">消息通知</MenuItem>\r\n          </Menu>\r\n        </div>\r\n        <div style=\"padding: 8px 40px;width:100%\">\r\n          <div class=\"title\">\r\n            {{currMenu}}\r\n          </div>\r\n          <div>\r\n            <div v-if=\"currMenu=='基本信息'\">\r\n              <Form \r\n                      ref=\"userForm\"\r\n                      :model=\"userForm\" \r\n                      :label-width=\"90\" \r\n                      label-position=\"left\"\r\n                  >\r\n                      <FormItem label=\"用户头像：\">\r\n                          <div class=\"upload-list\" v-for=\"item in uploadList\" :key=\"item.url\">\r\n                            <template v-if=\"item.status === 'finished'\">\r\n                                <img :src=\"item.url\">\r\n                                <div class=\"upload-list-cover\">\r\n                                    <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.url)\"></Icon>\r\n                                    <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n                                </div>\r\n                            </template>\r\n                            <template v-else>\r\n                                <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n                            </template>\r\n                          </div>\r\n                          <Upload\r\n                              ref=\"upload\"\r\n                              :show-upload-list=\"false\"\r\n                              :default-file-list=\"defaultList\"\r\n                              :on-success=\"handleSuccess\"\r\n                              :on-error=\"handleError\"\r\n                              :format=\"['jpg','jpeg','png','gif']\"\r\n                              :max-size=\"5120\"\r\n                              :on-format-error=\"handleFormatError\"\r\n                              :on-exceeded-size=\"handleMaxSize\"\r\n                              :before-upload=\"handleBeforeUpload\"\r\n                              type=\"drag\"\r\n                              :action=\"uploadFileUrl\"\r\n                              :headers=\"accessToken\"\r\n                              style=\"display: inline-block;width:58px;\">\r\n                            <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n                                <Icon type=\"md-camera\" size=\"20\"></Icon>\r\n                            </div>\r\n                        </Upload>\r\n                      </FormItem>\r\n                      <FormItem label=\"昵称：\" prop=\"nickName\">\r\n                        <Input v-model=\"userForm.nickName\" style=\"width: 250px\"/>\r\n                      </FormItem>\r\n                      <FormItem label=\"性别：\">\r\n                          <RadioGroup v-model=\"userForm.sex\">\r\n                            <Radio v-for=\"(item, i) in dictSex\" :key=\"i\" :label=\"Number(item.value)\">{{item.title}}</Radio>\r\n                          </RadioGroup>\r\n                      </FormItem>\r\n                      <FormItem label=\"个人简介：\" prop=\"description\">\r\n                        <Input v-model=\"userForm.description\" type=\"textarea\" style=\"width: 250px\" :autosize=\"{minRows: 3,maxRows: 5}\" placeholder=\"个人简介\"></Input>\r\n                      </FormItem>\r\n                      <FormItem label=\"国家/地区：\">\r\n                        <Select v-model=\"area\" style=\"width: 250px\">\r\n                          <Option :value=\"86\">中国</Option>\r\n                        </Select>\r\n                      </FormItem>\r\n                      <FormItem label=\"所在省市：\" >\r\n                          <al-cascader v-model=\"userForm.addressArray\" @on-change=\"changeAddress\" data-type=\"code\" level=\"2\" style=\"width:250px\"/>\r\n                      </FormItem>\r\n                      <FormItem label=\"街道地址：\" prop=\"street\">\r\n                        <Input v-model=\"userForm.street\" style=\"width: 250px\"/>\r\n                      </FormItem>\r\n                      <FormItem label=\"所属部门：\">\r\n                          <span>{{ userForm.departmentTitle }}</span>\r\n                      </FormItem>\r\n                    <FormItem label=\"用户类型：\">\r\n                          <span>{{ userForm.typeTxt }}</span>\r\n                      </FormItem>\r\n                      <FormItem label=\"注册时间：\">\r\n                          <span>{{ userForm.createTime }}</span>\r\n                      </FormItem>\r\n                      <FormItem>\r\n                          <Button type=\"primary\" style=\"width: 100px;margin-right:5px\" :loading=\"saveLoading\" @click=\"saveEdit\">保存</Button>\r\n                      </FormItem>\r\n                  </Form>\r\n            </div>\r\n            <div v-if=\"currMenu=='安全设置'\" class=\"safe\">\r\n              <div class=\"item\">\r\n                <div>\r\n                  <div class=\"title\">账户密码</div>\r\n                  <div v-if=\"userForm.passStrength\" class=\"desc\">当前密码强度：\r\n                    <span v-if=\"userForm.passStrength=='弱'\" class=\"red\">{{userForm.passStrength}}</span>\r\n                    <span v-if=\"userForm.passStrength=='中'\" class=\"middle\">{{userForm.passStrength}}</span>\r\n                    <span v-if=\"userForm.passStrength=='强'\" class=\"green\">{{userForm.passStrength}}</span>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a @click=\"changePass\">修改</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div>\r\n                  <div class=\"title\">绑定手机</div>\r\n                  <div class=\"desc\">\r\n                    <span v-if=\"userForm.mobile\">已绑定手机：{{userForm.mobile}}</span>\r\n                    <span v-else>未绑定手机号</span>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a @click=\"showChangeMobile\">修改</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div>\r\n                  <div class=\"title\">绑定邮箱</div>\r\n                  <div class=\"desc\">\r\n                    <span v-if=\"userForm.email\">已绑定邮箱：{{userForm.email}}</span>\r\n                    <span v-else>未绑定邮箱</span>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a @click=\"showChangeEmail\">修改</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div>\r\n                  <div class=\"title\">密保问题</div>\r\n                  <div class=\"desc\">未设置密保问题，密保问题可有效保护账户安全</div>\r\n                </div>\r\n                <div>\r\n                  <a>暂不支持设置</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div v-if=\"currMenu=='第三方账号绑定'\" class=\"safe\">\r\n              <div class=\"item\">\r\n                <div style=\"display:flex;align-items:center\">\r\n                  <Icon type=\"logo-github\" size=\"42\" color=\"#181617\" style=\"margin-right: 16px;\"/>\r\n                  <div>\r\n                    <div class=\"title\">Github</div>\r\n                    <div class=\"desc\">\r\n                      <span v-if=\"github.related\">已绑定Github账号：{{github.username}}</span>\r\n                      <span v-else>当前未绑定Github账号</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a v-if=\"!github.related\" @click=\"toRelateGithub()\">立即绑定</a>\r\n                  <a v-else @click=\"unRelateGithub()\">解除绑定</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div style=\"display:flex;align-items:center\">\r\n                  <icon name=\"brands/qq\" scale=\"2.5\" style=\"margin: 0 16px 0 6px;color:#2eabff\"></icon>\r\n                  <div>\r\n                    <div class=\"title\">QQ</div>\r\n                    <div class=\"desc\">\r\n                      <span v-if=\"qq.related\">已绑定QQ账号：{{qq.username}}</span>\r\n                      <span v-else>当前未绑定QQ账号</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a v-if=\"!qq.related\" @click=\"toRelateQQ()\">立即绑定</a>\r\n                  <a v-else @click=\"unRelateQQ()\">解除绑定</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div style=\"display:flex;align-items:center\">\r\n                  <icon name=\"brands/weibo\" scale=\"2.5\" style=\"margin: 0 16px 0 2px;color:#e22429\"></icon>\r\n                  <div>\r\n                    <div class=\"title\">微博</div>\r\n                    <div class=\"desc\">\r\n                      <span v-if=\"weibo.related\">已绑定微博账号：{{weibo.username}}</span>\r\n                      <span v-else>当前未绑定微博账号</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a v-if=\"!weibo.related\" @click=\"toRelateWeibo()\">立即绑定</a>\r\n                  <a v-else @click=\"unRelateWeibo()\">解除绑定</a>\r\n                </div>\r\n              </div>\r\n              <div class=\"item\">\r\n                <div style=\"display:flex;align-items:center\">\r\n                  <icon name=\"brands/weixin\" scale=\"2.5\" style=\"margin: 0 16px 0 2px;color:#60c126\"></icon>\r\n                  <div>\r\n                    <div class=\"title\">微信</div>\r\n                    <div class=\"desc\">当前未绑定微信账号</div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <a>暂不支持</a>\r\n                </div>\r\n              </div>\r\n              <Spin fix v-if=\"jumping\">跳转中...</Spin>\r\n            </div>\r\n            <div v-if=\"currMenu=='消息通知'\" class=\"safe\">\r\n              <div class=\"item\">\r\n                <div>\r\n                  <div class=\"title\">系统消息</div>\r\n                  <div class=\"desc\">系统消息将以站内信的形式通知</div>\r\n                </div>\r\n                <div>\r\n                  <i-switch v-model=\"messageOpen\" :true-value=\"1\" :false-value=\"0\">\r\n                    <span slot=\"open\">开</span>\r\n                    <span slot=\"close\">关</span>\r\n                  </i-switch>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n\r\n    <!-- 密码验证 -->\r\n    <Modal title=\"身份验证\" v-model=\"passCheckVisible\" fullscreen footer-hide>\r\n      <div class=\"pass-check\" @keydown.enter=\"checkPassChange\">\r\n        <Icon type=\"md-lock\" size=\"30\" style=\"margin-bottom:10px;\"/>\r\n        <div class=\"title\" style=\"margin-bottom:40px;\">密码认证</div>\r\n        <div class=\"desc\">请输入您的密码</div>\r\n        <Input autofocus v-model=\"password\" size=\"large\" placeholder=\"请输入您的密码\" type=\"password\" style=\"width:300px;margin-bottom:40px;\"/>\r\n        <div style=\"margin-bottom:60px;\">\r\n          <Button size=\"large\" @click=\"passCheckVisible=false\" style=\"margin-right:20px;\">取消</Button>\r\n          <Button :loading=\"checkPassLoading\" :disabled=\"!password\" @click=\"checkPassChange\" type=\"primary\" size=\"large\">提交</Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal title=\"修改手机号\" v-model=\"editMobileVisible\" :closable='false' :mask-closable=false :width=\"500\">\r\n      <Form ref=\"mobileEditForm\" :model=\"mobileEditForm\" :label-width=\"60\" :rules=\"mobileEditValidate\">\r\n        <FormItem label=\"手机号\" prop=\"mobile\">\r\n          <Input v-model=\"mobileEditForm.mobile\" @on-change=\"hasChangePhone\" placeholder=\"请输入新手机号\"/>\r\n        </FormItem>\r\n        <FormItem label=\"验证码\" prop=\"code\" :error=\"codeError\">\r\n          <Input v-model=\"mobileEditForm.code\" placeholder=\"请输入您收到的短信验证码\" style=\"width:200px;margin-right:5px;\"/>\r\n          <div style=\"display:inline-block;position:relative;\">\r\n            <Button :loading=\"sendingSms\" @click=\"getIdentifyCode\" :disabled=\"canGetIdentifyCode\" v-if=\"!sended\" style=\"width: 100px;\">\r\n              <span v-if=\"!sendingSms\">发送验证码</span>\r\n              <span v-else>发送中</span>\r\n            </Button>\r\n            <Button disabled v-if=\"sended\" style=\"width: 100px;\">{{countButton}}</Button>\r\n          </div>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelInputCodeBox\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"checkCodeLoading\" @click=\"submitEditMobile\">提交</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal title=\"修改邮箱\" v-model=\"editEmailVisible\" :closable='false' :mask-closable=false :width=\"500\">\r\n      <Form ref=\"emailEditForm\" :model=\"emailEditForm\" :label-width=\"90\" :rules=\"emailEditValidate\">\r\n        <FormItem label=\"新邮箱地址\" prop=\"email\">\r\n          <Input v-model=\"emailEditForm.email\" @on-change=\"hasChangeEmail\" placeholder=\"请输入新邮箱地址\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"验证码\" prop=\"code\" :error=\"codeError\">\r\n          <Input v-model=\"emailEditForm.code\" placeholder=\"请输入您收到的邮件中的验证码\" style=\"width:200px;margin-right:5px;\"/>\r\n          <div style=\"display:inline-block;position:relative;\">\r\n            <Button :loading=\"sendEmailLoading\" @click=\"sendVerifyEmail\" :disabled=\"canSendEditEmail\" v-if=\"!sendedEmail\" style=\"width: 100px;\">\r\n              <span v-if=\"!sendEmailLoading\">发送验证邮件</span>\r\n              <span v-else>发送中</span>\r\n            </Button>\r\n            <Button disabled v-if=\"sendedEmail\" style=\"width: 100px;\">{{countButtonEmail}}</Button>\r\n          </div>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelEditEmail\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"editEmailLoading\" @click=\"submitEditEmail\">提交</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal title=\"图片预览\" v-model=\"viewImage\" draggable>\r\n      <img :src=\"imgUrl\" style=\"width: 80%;margin: 0 auto;display: block;\">\r\n      <div slot=\"footer\">\r\n        <Button @click=\"viewImage=false\">关闭</Button>\r\n       </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  userInfo,\r\n  userInfoEdit,\r\n  relatedInfo,\r\n  unRelate,\r\n  githubLogin,\r\n  qqLogin,\r\n  weiboLogin,\r\n  sendCodeEmail,\r\n  editEmail,\r\n  sendSms,\r\n  changeMobile,\r\n  unlock,\r\n  uploadFile,\r\n  getDictDataByType\r\n} from \"@/api/index\";\r\nimport Cookies from \"js-cookie\";\r\nexport default {\r\n  name: \"ownspace_index\",\r\n  data() {\r\n    const validePhone = (rule, value, callback) => {\r\n      var re = /^1[0-9]{10}$/;\r\n      if (!re.test(value)) {\r\n        callback(new Error(\"请输入正确格式的手机号\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      accessToken: {},\r\n      uploadFileUrl: uploadFile,\r\n      area: 86,\r\n      messageOpen: 1,\r\n      userForm: {\r\n        id: \"\",\r\n        avatar: \"\",\r\n        username: \"\",\r\n        sex: \"\",\r\n        mobile: \"\",\r\n        email: \"\",\r\n        status: \"\",\r\n        type: \"\",\r\n        typeTxt: \"\",\r\n        address: \"\",\r\n        addressArray: []\r\n      },\r\n      mobileEditForm: {\r\n        mobile: \"\",\r\n        code: \"\"\r\n      },\r\n      emailEditForm: {\r\n        email: \"\",\r\n        code: \"\"\r\n      },\r\n      defaultList: [\r\n        {\r\n          url: \"\"\r\n        }\r\n      ],\r\n      uploadList: [],\r\n      viewImage: false,\r\n      imgUrl: \"\",\r\n      codeError: \"\",\r\n      initPhone: \"\",\r\n      initEmail: \"\",\r\n      saveLoading: false,\r\n      sended: false,\r\n      count: 60,\r\n      countButton: \"60 s\",\r\n      sendedEmail: false,\r\n      countEmail: 60,\r\n      countButtonEmail: \"60 s\",\r\n      savePassLoading: false,\r\n      canGetIdentifyCode: false, // 是否可点获取验证码\r\n      checkCodeLoading: false,\r\n      checkPassLoading: false,\r\n      sendingSms: false,\r\n      editEmailLoading: false,\r\n      mobileEditValidate: {\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号码\" },\r\n          { validator: validePhone }\r\n        ]\r\n      },\r\n      emailEditValidate: {\r\n        email: [\r\n          { required: true, message: \"请输入邮箱地址\" },\r\n          { type: \"email\", message: \"邮箱格式不正确\" }\r\n        ]\r\n      },\r\n      editMobileVisible: false, // 显示填写验证码box\r\n      editEmailVisible: false,\r\n      sendEmailLoading: false,\r\n      canSendEditEmail: true,\r\n      passCheckVisible: false, // 密码验证\r\n      password: \"\",\r\n      changeType: \"\",\r\n      github: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      qq: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      weibo: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      jumping: false,\r\n      currMenu: \"基本信息\",\r\n      dictSex: []\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getDictSexData();\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\")\r\n      };\r\n      let v = JSON.parse(Cookies.get(\"userInfo\"));\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] === null) {\r\n          v[attr] = \"\";\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let userInfo = JSON.parse(str);\r\n      userInfo.addressArray = [];\r\n      this.userForm = userInfo;\r\n      this.initPhone = userInfo.mobile;\r\n      this.mobileEditForm.mobile = userInfo.mobile;\r\n      this.initEmail = userInfo.email;\r\n      this.emailEditForm.email = userInfo.email;\r\n      this.defaultList[0].url = userInfo.avatar;\r\n      if (userInfo.address !== null && userInfo.address !== \"\") {\r\n        this.userForm.address = userInfo.address;\r\n        this.userForm.addressArray = JSON.parse(userInfo.address);\r\n      }\r\n      if (this.userForm.type === 0) {\r\n        this.userForm.typeTxt = \"普通用户\";\r\n      } else if (this.userForm.type === 1) {\r\n        this.userForm.typeTxt = \"管理员\";\r\n      }\r\n      relatedInfo(userInfo.username).then(res => {\r\n        if (res.success) {\r\n          let r = res.result;\r\n          this.github.related = r.github;\r\n          this.github.id = r.githubId;\r\n          this.github.username = r.githubUsername;\r\n          this.qq.related = r.qq;\r\n          this.qq.id = r.qqId;\r\n          this.qq.username = r.qqUsername;\r\n          this.weibo.related = r.weibo;\r\n          this.weibo.id = r.weiboId;\r\n          this.weibo.username = r.weiboUsername;\r\n        } else {\r\n          this.$Message.error(\"加载绑定第三方账号信息失败\");\r\n        }\r\n      });\r\n    },\r\n    getDictSexData(){\r\n      // 获取性别字典数据\r\n      getDictDataByType(\"sex\").then(res => {\r\n        if(res.success){\r\n          this.dictSex = res.result\r\n        }\r\n      })\r\n    },\r\n    changePass() {\r\n      this.$router.push({\r\n        name: \"change_pass\"\r\n      });\r\n    },\r\n    changeMenu(v) {\r\n      this.currMenu = v;\r\n    },\r\n    toRelateGithub() {\r\n      this.jumping = true;\r\n      githubLogin().then(res => {\r\n        if (res.success) {\r\n          window.location.href = res.result;\r\n        } else {\r\n          this.jumping = false;\r\n        }\r\n      });\r\n    },\r\n    toRelateQQ() {\r\n      this.jumping = true;\r\n      qqLogin().then(res => {\r\n        if (res.success) {\r\n          window.location.href = res.result;\r\n        } else {\r\n          this.jumping = false;\r\n        }\r\n      });\r\n    },\r\n    toRelateWeibo() {\r\n      this.jumping = true;\r\n      weiboLogin().then(res => {\r\n        if (res.success) {\r\n          window.location.href = res.result;\r\n        } else {\r\n          this.jumping = false;\r\n        }\r\n      });\r\n    },\r\n    unRelateGithub() {\r\n      this.$Modal.confirm({\r\n        title: \"确认解绑Github账号\",\r\n        content: \"您确认要解除绑定 \" + this.github.username + \" ?\",\r\n        onOk: () => {\r\n          let params = {\r\n            socialType: 0,\r\n            ids: [this.github.id],\r\n            usernames: this.userForm.username\r\n          };\r\n          unRelate(params).then(res => {\r\n            if (res.success === true) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.github.related = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    unRelateQQ() {\r\n      this.$Modal.confirm({\r\n        title: \"确认解绑QQ账号\",\r\n        content: \"您确认要解除绑定 \" + this.qq.username + \" ?\",\r\n        onOk: () => {\r\n          let params = {\r\n            socialType: 1,\r\n            ids: [this.qq.id],\r\n            usernames: this.userForm.username\r\n          };\r\n          unRelate(params).then(res => {\r\n            if (res.success === true) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.qq.related = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    unRelateWeibo() {\r\n      this.$Modal.confirm({\r\n        title: \"确认解绑微博账号\",\r\n        content: \"您确认要解除绑定 \" + this.weibo.username + \" ?\",\r\n        onOk: () => {\r\n          let params = {\r\n            socialType: 2,\r\n            ids: [this.weibo.id],\r\n            usernames: this.userForm.username\r\n          };\r\n          unRelate(params).then(res => {\r\n            if (res.success === true) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.weibo.related = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    handleView(imgUrl) {\r\n      this.imgUrl = imgUrl;\r\n      this.viewImage = true;\r\n    },\r\n    handleRemove(file) {\r\n      const fileList = this.$refs.upload.fileList;\r\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\r\n    },\r\n    handleSuccess(res, file) {\r\n      if (res.success === true) {\r\n        file.url = res.result;\r\n        this.userForm.avatar = res.result;\r\n        this.defaultList[0].url = res.result;\r\n        this.$refs.upload.fileList.splice(0, 1);\r\n      } else {\r\n        this.$Message.error(res.message);\r\n      }\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    handleFormatError(file) {\r\n      this.$Notice.warning({\r\n        title: \"不支持的文件格式\",\r\n        desc:\r\n          \"所选文件‘ \" +\r\n          file.name +\r\n          \" ’格式不正确, 请选择 .jpg .jpeg .png .gif格式文件\"\r\n      });\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\r\n      });\r\n    },\r\n    handleBeforeUpload() {\r\n      const check = this.uploadList.length < 2;\r\n      if (!check) {\r\n        this.$Notice.warning({\r\n          title: \"最多只能上传 1 张图片\"\r\n        });\r\n      }\r\n      return check;\r\n    },\r\n    showChangeMobile() {\r\n      this.passCheckVisible = true;\r\n      this.password = \"\";\r\n      this.changeType = \"mobile\";\r\n    },\r\n    showChangeEmail() {\r\n      this.passCheckVisible = true;\r\n      this.password = \"\";\r\n      this.changeType = \"email\";\r\n    },\r\n    checkPassChange() {\r\n      this.checkPassLoading = true;\r\n      unlock({ password: this.password }).then(res => {\r\n        this.checkPassLoading = false;\r\n        if (res.success === true) {\r\n          this.passCheckVisible = false;\r\n          if (this.changeType == \"mobile\") {\r\n            this.editMobileVisible = true;\r\n          } else if (this.changeType == \"email\") {\r\n            this.editEmailVisible = true;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    saveEdit() {\r\n      this.saveLoading = true;\r\n      let params = this.userForm;\r\n      userInfoEdit(params).then(res => {\r\n        this.saveLoading = false;\r\n        if (res.success === true) {\r\n          this.$Message.success(\"保存成功\");\r\n          // 更新用户信息\r\n          Cookies.set(\"userInfo\", this.userForm);\r\n          // 更新头像\r\n          this.$store.commit(\"setAvatarPath\", this.userForm.avatar);\r\n        }\r\n      });\r\n    },\r\n    changeAddress() {\r\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\r\n    },\r\n    cancelInputCodeBox() {\r\n      this.editMobileVisible = false;\r\n      this.userForm.mobile = this.initPhone;\r\n    },\r\n    cancelEditEmail() {\r\n      this.editEmailVisible = false;\r\n      this.emailEditForm.email = this.initEmail;\r\n    },\r\n    countDown() {\r\n      let that = this;\r\n      if (this.count === 0) {\r\n        this.sended = false;\r\n        this.count = 60;\r\n        return;\r\n      } else {\r\n        this.countButton = this.count + \" s\";\r\n        this.count--;\r\n      }\r\n      setTimeout(function() {\r\n        that.countDown();\r\n      }, 1000);\r\n    },\r\n    countDownEmail() {\r\n      let that = this;\r\n      if (this.countEmail === 0) {\r\n        this.sendedEmail = false;\r\n        this.countEmail = 60;\r\n        return;\r\n      } else {\r\n        this.countButtonEmail = this.countEmail + \" s\";\r\n        this.countEmail--;\r\n      }\r\n      setTimeout(function() {\r\n        that.countDownEmail();\r\n      }, 1000);\r\n    },\r\n    getIdentifyCode() {\r\n      this.$refs[\"mobileEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          this.sendingSms = true;\r\n          sendSms(this.mobileEditForm.mobile).then(res => {\r\n            this.sendingSms = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"发送短信验证码成功\");\r\n              // 开始倒计时\r\n              this.sended = true;\r\n              this.countDown();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    submitEditMobile() {\r\n      this.$refs[\"mobileEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          if (!this.mobileEditForm.code) {\r\n            this.codeError = \"请填写短信验证码\";\r\n            return;\r\n          } else {\r\n            this.codeError = \"\";\r\n          }\r\n          this.checkCodeLoading = true;\r\n          changeMobile(this.mobileEditForm).then(res => {\r\n            this.checkCodeLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"修改成功\");\r\n              this.userForm.mobile = this.mobileEditForm.mobile;\r\n              this.initPhone = this.mobileEditForm.mobile;\r\n              this.updateUserInfo();\r\n              this.editMobileVisible = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    hasChangePhone() {\r\n      if (this.mobileEditForm.mobile === this.initPhone) {\r\n        this.canGetIdentifyCode = true;\r\n      } else {\r\n        this.$refs[\"mobileEditForm\"].validate(valid => {\r\n          if (valid) {\r\n            this.canGetIdentifyCode = false;\r\n          } else {\r\n            this.canGetIdentifyCode = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    hasChangeEmail() {\r\n      if (this.emailEditForm.email === this.initEmail) {\r\n        this.canSendEditEmail = true;\r\n      } else {\r\n        this.canSendEditEmail = false;\r\n      }\r\n    },\r\n    sendVerifyEmail() {\r\n      this.$refs[\"emailEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          this.sendEmailLoading = true;\r\n          sendCodeEmail(this.emailEditForm.email).then(res => {\r\n            this.sendEmailLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"发送邮件验证码成功，请注意查收\");\r\n              // 开始倒计时\r\n              this.sendedEmail = true;\r\n              this.countDownEmail();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    submitEditEmail() {\r\n      this.$refs[\"emailEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          if (!this.emailEditForm.code) {\r\n            this.codeError = \"验证码不能为空\";\r\n            return;\r\n          } else {\r\n            this.codeError = \"\";\r\n          }\r\n          this.editEmailLoading = true;\r\n          editEmail(this.emailEditForm).then(res => {\r\n            this.editEmailLoading = false;\r\n            if (res.success) {\r\n              this.initEmail = this.emailEditForm.email;\r\n              this.userForm.email = this.emailEditForm.email;\r\n              this.updateUserInfo();\r\n              this.$Message.success(\"修改邮件成功\");\r\n              this.editEmailVisible = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    updateUserInfo() {\r\n      // 更新用户信息\r\n      userInfo().then(res => {\r\n        if (res.success) {\r\n          // 避免超过大小限制\r\n          delete res.result.permissions;\r\n          if (this.getStore(\"saveLogin\")) {\r\n            // 保存7天\r\n            Cookies.set(\"userInfo\", JSON.stringify(res.result), {\r\n              expires: 7\r\n            });\r\n          } else {\r\n            Cookies.set(\"userInfo\", JSON.stringify(res.result));\r\n          }\r\n          this.setStore(\"userInfo\", res.result);\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.uploadList = this.$refs.upload.fileList;\r\n    this.init();\r\n    this.hasChangePhone();\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src\\views\\own-space"}]}